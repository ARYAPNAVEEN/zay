{% extends "user/base.html" %}
{% load static %}
{% block title %}Product Details{% endblock %}
{% block content %}

<link rel="stylesheet" type="text/css" href="{% static '/css/slick.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/slick-theme.css' %}">

<style>
  /* Product image zoom */
  #product-detail {
      transition: transform 0.3s ease-in-out;
      cursor: zoom-in;
  }
  #product-detail:hover {
      transform: scale(1.05);
  }

  /* Product title & price */
  .product-title {
      font-size: 28px;
      font-weight: 700;
      color: #222;
  }
  .product-price {
      font-size: 26px;
      font-weight: 600;
      color: #e63946;
      margin-bottom: 15px;
  }

  /* Buttons */
  .btn-buy {
      background: linear-gradient(90deg, #ff6a00, #ee0979);
      color: white;
      font-size: 18px;
      font-weight: 600;
      border-radius: 30px;
      transition: all 0.3s ease-in-out;
  }
  .btn-buy:hover {
      background: linear-gradient(90deg, #ee0979, #ff6a00);
      transform: translateY(-3px);
  }
  .btn-cart {
      background: #28a745;
      font-size: 18px;
      font-weight: 600;
      border-radius: 30px;
      transition: all 0.3s ease-in-out;
      color: white;
  }
  .btn-cart:hover {
      background: #218838;
      transform: translateY(-3px);
  }

  /* Related products hover */
  .product-wap:hover img {
      transform: scale(1.05);
      transition: transform 0.3s ease-in-out;
  }
</style>

<section class="bg-light py-5">
  <div class="container">
    
    <!-- Breadcrumb -->
    

    <div class="row">
      <!-- Product Image -->
      <div class="col-lg-5 mt-4">
        <div class="card border-0 shadow-sm">
          <img class="card-img img-fluid rounded"
               src="{{ product.image.url }}"
               alt="{{ product.name }}"
               id="product-detail"
               style="height: 480px; object-fit: cover;">
        </div>
      </div>
      
      <!-- Product Info -->
      <div class="col-lg-7 mt-4">
        <div class="card border-0 shadow-sm p-4">
          <div class="card-body">
            
            <!-- Name & Price -->
            <h1 class="product-title">{{ product.name }}</h1>
            <p class="product-price">₹{{ product.price }}</p>

            <!-- Brand -->
            <div class="mb-3">
              <span class="fw-bold">Brand:</span> 
              <span class="text-muted ms-2">{{ product.brand }}</span>
            </div>

            {% comment %} <!-- Tabs -->
            <ul class="nav nav-tabs" id="productTab" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="desc-tab" data-bs-toggle="tab" data-bs-target="#desc" type="button">Description</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping" type="button">Shipping Info</button>
              </li>
            </ul> {% endcomment %}
            <span class="fw-bold">Description:</span> 
            <div class="tab-content border p-3 mt-3 rounded">
              
                <p class="text-muted">{{ product.description }}</p>
              </div>
            </div>
              <div class="fw-bold mt-3" id="shipping" >
                         <p class="text-muted" style="color:black !important;">Free shipping for orders above ₹999. Delivery within 3–5 days.</p>              
              </div>           
               <!-- Action Buttons -->
            <div class="row pt-4">
              <div class="col-md-6 d-grid mb-2">
                <button type="button" class="btn btn-buy btn-lg shadow-sm">
                  <i class="fa fa-bolt me-2"></i> Buy Now
                </button>
              </div>
              <div class="col-md-6 d-grid mb-2">
                <a href="{% url 'addto_cart' product.id %}" class="btn btn-cart btn-lg shadow-sm">
                  <i class="fa fa-shopping-cart me-2"></i> Add to Cart
                </a>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- Related Products -->
<section class="py-5">
  <div class="container">
    <div class="row text-left p-2 pb-3">
      <h4>Related Products</h4>
    </div>
    <div id="carousel-related-product">
      {% if related_products %}   
        {% for product in related_products %}     
          <div class="p-2 pb-3">
            <div class="product-wap card rounded-0">
              <div class="card rounded-0">
                <img class="card-img rounded-0 img-fluid" src="{{ product.image.url }}">
                <div class="card-img-overlay rounded-0 product-overlay d-flex align-items-center justify-content-center">
                  <ul class="list-unstyled">
                    <li><a class="btn btn-success text-white" href="{% url 'product_details' product.id %}"><i class="far fa-heart"></i></a></li>
                    <li><a class="btn btn-success text-white mt-2" href="{% url 'product_details' product.id %}"><i class="far fa-eye"></i></a></li>
                    <li><a class="btn btn-success text-white mt-2" href="{% url 'addto_cart' product.id %}"><i class="fas fa-cart-plus"></i></a></li>
                  </ul>
                </div>
              </div>
              <div class="card-body text-center">
                <a href="{% url 'product_details' product.id %}" class="h6 text-decoration-none">{{ product.name }}</a>
                <p class="text-success fw-bold mt-2">₹{{ product.price }}</p>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <p>No related products found.</p>
      {% endif %}
    </div> 
  </div>
</section>

<script src="{% static 'js/slick.min.js' %}"></script>
<script>
  $('#carousel-related-product').slick({
      infinite: true,
      arrows: false,
      slidesToShow: 4,
      slidesToScroll: 3,
      dots: true,
      responsive: [
        { breakpoint: 1024, settings: { slidesToShow: 3, slidesToScroll: 3 }},
        { breakpoint: 600, settings: { slidesToShow: 2, slidesToScroll: 3 }},
        { breakpoint: 480, settings: { slidesToShow: 2, slidesToScroll: 3 }}
      ]
  });
</script>

{% endblock %}
