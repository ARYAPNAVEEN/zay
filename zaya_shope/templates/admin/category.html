{% extends "admin/base2.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-lg border-0">
        <div class="card-body">
            <div class="categhead d-flex justify-content-between align-items-center mb-4" >
                <h3 class="fw-bold mb-0 " > Category List</h3>
                <a data-bs-toggle="modal" data-bs-target="#addModal" class="btn ">
                    Add New Category
                </a>
            </div>
             <div class="table-responsive">
              <table class="table my-custom-table table-hover align-middle mb-0" style=" border-radius: 10px;">
                <thead class="custom-thead " style="background-color: #04372c!important;" id="categhead">
                  <tr class="text-center text-dark fw-bold">
                    <th scope="col" style="width: 60px;">No</th>
                    <th scope="col">Category Name</th>
                    <th scope="col">category image</th>
                    <th scope="col" style="width: 180px;">Actions</th>
                  </tr>
                </thead>
                <tbody>
                {% for i in categ %}
                  <tr class="text-center">
                    <th scope="row">{{ forloop.counter }}</th>
                    <td class="fw-medium">{{ i.name }}</td>
                    <td class="fw-medium">
                      {% if i.image %}
                        <img src="{{ i.image.url}}" width="100px" height="50px">
                      {% else %}
                          <span class="text-muted">No Image</span>
                      {% endif %}
                   </td>
                    <td>
                     
                      {% if i.id %}
                        <!-- Edit Button -->
                        <a href="{% url 'categ_edit' i.id %}"><button class="edit-btn" >
                          ‚úèÔ∏è Edit
                          </button>
                        </a>
                      {% endif %}
                      <a href="{% url 'delete_categ' i.id %}" class="delete-btn  btn-sm" onclick="return confirm('Are you sure to delete?')">
                        üóëÔ∏è Delete
                      </a>
                    </td>
                  </tr>
                {% endfor %}
                </tbody>
              </table>
            </div>
        </div>
    </div>
</div> 

<!--add category  Modal -->
                            {% for i in categ %}
                              <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel{{ i.id }}" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                  <div class="modal-content" style="border-radius: 20px; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: none; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
                                    <div class="modal-header border-0">
                                      <h5 class="modal-title" id="editNameModalLabel{{ i.id }}">Add New Category</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>

                                   <form method="POST" action="{% url 'add_categ' %}" enctype='multipart/form-data'>
                                      {% csrf_token %}
                                      <div class="modal-body">
                                        <div class="mb-3">
                                          <label for="nameFieldAdd" class="form-label">Category Name</label>
                                          <input type="text" class="form-control" id="nameFieldAdd" name="name" placeholder="Enter category name" required>
                                        </div>
                                          <div class="mb-3">
                                            <label class="form-label">Image</label>
                                            <input type="file" class="form-control" name="image" required>
                                          </div>
                                      </div>
                                      <div class="modal-footer border-0">
                                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                                        <button type="submit" class="btn btn-success">Add Category</button>
                                      </div>
                                    </form>

                                  </div>
                                </div>
                              </div>
                            {% endfor %}

<!-- Edit Modal -->

  
{% comment %}                      
                              <div class="modal fade" id="editNameModal{{ i.id }}" tabindex="-1" aria-labelledby="editNameModalLabel{{ i.id }}" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                  <div class="modal-content" style="border-radius: 20px; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: none; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
                                    <div class="modal-header border-0">
                                      <h5 class="modal-title" >Edit Name</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                  {% for categ in categ %}
                                    <form method="POST" action="{% url 'edit_categ' categ.id %}" enctype='multipart/form-data'>
                                      {% csrf_token %}
                                      <div class="modal-body">
                                        <div class="mb-3">
                                          <label for="nameField" class="form-label">Name</label>
                                          <input type="text" class="form-control" id="nameField" name="name" value="{{ categ.name }}" placeholder="Enter new name">
                                        </div>
                                        <div class="mb-3">
                                          <label for="image{{ categ.id }}">currentimage:</label>
                                          {% if categ.image and categ.image.name %}
                                              <img src="{{ categ.image.url }}" width="100"><br>
                                          {% else %}
                                              <span class="text-muted">No Image</span><br>
                                          {% endif %}
                                          <input type="file" name="image">
                                      </div>
                                      <div class="modal-footer border-0">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                        <button type="submit" class="btn btn-success">Save Changes</button>
                                      </div>
                                    </form>
                                  {% endfor %}
                                  </div>
                                </div>
                              </div> {% endcomment %}

                    
                        
<!-- end Edit Modal -->
{% endblock %}